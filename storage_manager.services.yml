services:
  storage_manager.service_provider:
    class: Drupal\storage_manager\StorageManagerServiceProvider
    tags:
      - { name: service_provider }
  storage_manager.route_subscriber:
    class: Drupal\storage_manager\Routing\RouteSubscriber
    tags:
      - { name: event_subscriber }

  logger.channel.storage_manager:
    parent: logger.channel_base
    arguments: ['storage_manager']

  storage_manager.subscription_manager:
    class: Drupal\storage_manager\Stripe\SubscriptionManager
    arguments: ['@logger.channel.storage_manager']
    # Add Stripe client later if you enable Stripe.

  storage_manager.assignment_guard:
    class: Drupal\storage_manager\Service\AssignmentGuard
    arguments: ['@entity_type.manager', '@logger.channel.storage_manager']

  storage_manager.violation_manager:
    class: Drupal\storage_manager\Service\ViolationManager
    arguments: ['@datetime.time', '@config.factory', '@entity_type.manager']

  storage_manager.notification_manager:
    class: Drupal\storage_manager\Service\NotificationManager
    arguments:
      - '@config.factory'
      - '@plugin.manager.mail'
      - '@language_manager'
      - '@logger.channel.storage_manager'
      - '@datetime.time'
      - '@storage_manager.violation_manager'

  storage_manager.statistics_service:
    class: Drupal\storage_manager\Service\StatisticsService
    arguments: ['@entity_type.manager', '@storage_manager.violation_manager']
